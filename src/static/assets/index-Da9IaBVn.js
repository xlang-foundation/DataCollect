import{d as y,v as p,r as v,k as b,g as o,a as s,B as r,N as V,u as c,O as k,P as h,p as B,i as C,D as I,e as N,f as R,_ as F}from"./index-D6AMwTYj.js";import{l as S}from"./user-BP8Gv0cB.js";import"./request-DdvWjchG.js";const q={class:"login-container"},E=y({__name:"index",setup(K){const f=N(),l=p(!1),t=p(),a=v({username:"",password:""}),_={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度应在 3 到 20 个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度应在 6 到 20 个字符之间",trigger:"blur"}]},u=async()=>{t.value&&await t.value.validate(async d=>{if(d)try{l.value=!0;const e=await S({username:a.username,password:a.password});localStorage.setItem("token",e.token),localStorage.setItem("username",e.username),localStorage.setItem("display_name",e.display_name),I.success("登录成功"),f.push("/admin")}catch(e){console.error("Login failed:",e)}finally{l.value=!1}})};return(d,e)=>{const m=r("el-input"),n=r("el-form-item"),g=r("el-button"),w=r("el-form"),x=r("el-card");return R(),b("div",q,[o(x,{class:"login-card"},{header:s(()=>e[2]||(e[2]=[C("h2",{class:"login-title"},"系统登录",-1)])),default:s(()=>[o(w,{ref_key:"loginFormRef",ref:t,model:a,rules:_,"label-width":"0",size:"large",onKeyup:V(u,["enter"])},{default:s(()=>[o(n,{prop:"username"},{default:s(()=>[o(m,{modelValue:a.username,"onUpdate:modelValue":e[0]||(e[0]=i=>a.username=i),placeholder:"用户名","prefix-icon":c(k)},null,8,["modelValue","prefix-icon"])]),_:1}),o(n,{prop:"password"},{default:s(()=>[o(m,{modelValue:a.password,"onUpdate:modelValue":e[1]||(e[1]=i=>a.password=i),type:"password",placeholder:"密码","prefix-icon":c(h),"show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),o(n,null,{default:s(()=>[o(g,{loading:l.value,type:"primary",class:"login-button",onClick:u},{default:s(()=>e[3]||(e[3]=[B(" 登录 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])}}}),D=F(E,[["__scopeId","data-v-b6e1124c"]]);export{D as default};
