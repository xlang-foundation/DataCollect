import{q as Te,s as cn,d as fn,v as oe,o as ft,x as ln,w as dn,k as se,i as O,y as lt,g as U,z as dt,u as de,A as vn,B as he,t as ue,a as H,F as ze,l as Ye,C as hn,D as ne,G as mn,p as me,H as pn,I as gn,J as yn,K as _n,L as bn,e as wn,f as ce,M as Ae,_ as In}from"./index-BCQt0Us0.js";import{g as En}from"./label-BlJBb-Ce.js";import{s as Sn}from"./request-wLIDLjxB.js";const j=[];for(let E=0;E<256;++E)j.push((E+256).toString(16).slice(1));function Dn(E,B=0){return(j[E[B+0]]+j[E[B+1]]+j[E[B+2]]+j[E[B+3]]+"-"+j[E[B+4]]+j[E[B+5]]+"-"+j[E[B+6]]+j[E[B+7]]+"-"+j[E[B+8]]+j[E[B+9]]+"-"+j[E[B+10]]+j[E[B+11]]+j[E[B+12]]+j[E[B+13]]+j[E[B+14]]+j[E[B+15]]).toLowerCase()}let Ve;const Rn=new Uint8Array(16);function xn(){if(!Ve){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ve=crypto.getRandomValues.bind(crypto)}return Ve(Rn)}const Tn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),vt={randomUUID:Tn};function ht(E,B,W){var S;if(vt.randomUUID&&!E)return vt.randomUUID();E=E||{};const A=E.random??((S=E.rng)==null?void 0:S.call(E))??xn();if(A.length<16)throw new Error("Random bytes length must be >= 16");return A[6]=A[6]&15|64,A[8]=A[8]&63|128,Dn(A)}function Ne(E){throw new Error('Could not dynamically require "'+E+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var We={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var mt;function An(){return mt||(mt=1,function(E,B){(function(W){E.exports=W()})(function(){return function W(A,S,_){function L(N,k){if(!S[N]){if(!A[N]){var v=typeof Ne=="function"&&Ne;if(!k&&v)return v(N,!0);if(g)return g(N,!0);var y=new Error("Cannot find module '"+N+"'");throw y.code="MODULE_NOT_FOUND",y}var P=S[N]={exports:{}};A[N][0].call(P.exports,function(M){var K=A[N][1][M];return L(K||M)},P,P.exports,W,A,S,_)}return S[N].exports}for(var g=typeof Ne=="function"&&Ne,F=0;F<_.length;F++)L(_[F]);return L}({1:[function(W,A,S){(function(_){var L=_.MutationObserver||_.WebKitMutationObserver,g;if(L){var F=0,N=new L(M),k=_.document.createTextNode("");N.observe(k,{characterData:!0}),g=function(){k.data=F=++F%2}}else if(!_.setImmediate&&typeof _.MessageChannel<"u"){var v=new _.MessageChannel;v.port1.onmessage=M,g=function(){v.port2.postMessage(0)}}else"document"in _&&"onreadystatechange"in _.document.createElement("script")?g=function(){var $=_.document.createElement("script");$.onreadystatechange=function(){M(),$.onreadystatechange=null,$.parentNode.removeChild($),$=null},_.document.documentElement.appendChild($)}:g=function(){setTimeout(M,0)};var y,P=[];function M(){y=!0;for(var $,te,Y=P.length;Y;){for(te=P,P=[],$=-1;++$<Y;)te[$]();Y=P.length}y=!1}A.exports=K;function K($){P.push($)===1&&!y&&g()}}).call(this,typeof Te<"u"?Te:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(W,A,S){var _=W(1);function L(){}var g={},F=["REJECTED"],N=["FULFILLED"],k=["PENDING"];A.exports=v;function v(f){if(typeof f!="function")throw new TypeError("resolver must be a function");this.state=k,this.queue=[],this.outcome=void 0,f!==L&&K(this,f)}v.prototype.catch=function(f){return this.then(null,f)},v.prototype.then=function(f,D){if(typeof f!="function"&&this.state===N||typeof D!="function"&&this.state===F)return this;var w=new this.constructor(L);if(this.state!==k){var R=this.state===N?f:D;P(w,R,this.outcome)}else this.queue.push(new y(w,f,D));return w};function y(f,D,w){this.promise=f,typeof D=="function"&&(this.onFulfilled=D,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}y.prototype.callFulfilled=function(f){g.resolve(this.promise,f)},y.prototype.otherCallFulfilled=function(f){P(this.promise,this.onFulfilled,f)},y.prototype.callRejected=function(f){g.reject(this.promise,f)},y.prototype.otherCallRejected=function(f){P(this.promise,this.onRejected,f)};function P(f,D,w){_(function(){var R;try{R=D(w)}catch(d){return g.reject(f,d)}R===f?g.reject(f,new TypeError("Cannot resolve promise with itself")):g.resolve(f,R)})}g.resolve=function(f,D){var w=$(M,D);if(w.status==="error")return g.reject(f,w.value);var R=w.value;if(R)K(f,R);else{f.state=N,f.outcome=D;for(var d=-1,p=f.queue.length;++d<p;)f.queue[d].callFulfilled(D)}return f},g.reject=function(f,D){f.state=F,f.outcome=D;for(var w=-1,R=f.queue.length;++w<R;)f.queue[w].callRejected(D);return f};function M(f){var D=f&&f.then;if(f&&(typeof f=="object"||typeof f=="function")&&typeof D=="function")return function(){D.apply(f,arguments)}}function K(f,D){var w=!1;function R(b){w||(w=!0,g.reject(f,b))}function d(b){w||(w=!0,g.resolve(f,b))}function p(){D(d,R)}var h=$(p);h.status==="error"&&R(h.value)}function $(f,D){var w={};try{w.value=f(D),w.status="success"}catch(R){w.status="error",w.value=R}return w}v.resolve=te;function te(f){return f instanceof this?f:g.resolve(new this(L),f)}v.reject=Y;function Y(f){var D=new this(L);return g.reject(D,f)}v.all=pe;function pe(f){var D=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=f.length,R=!1;if(!w)return this.resolve([]);for(var d=new Array(w),p=0,h=-1,b=new this(L);++h<w;)C(f[h],h);return b;function C(G,X){D.resolve(G).then(q,function(Q){R||(R=!0,g.reject(b,Q))});function q(Q){d[X]=Q,++p===w&&!R&&(R=!0,g.resolve(b,d))}}}v.race=re;function re(f){var D=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=f.length,R=!1;if(!w)return this.resolve([]);for(var d=-1,p=new this(L);++d<w;)h(f[d]);return p;function h(b){D.resolve(b).then(function(C){R||(R=!0,g.resolve(p,C))},function(C){R||(R=!0,g.reject(p,C))})}}},{1:1}],3:[function(W,A,S){(function(_){typeof _.Promise!="function"&&(_.Promise=W(2))}).call(this,typeof Te<"u"?Te:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(W,A,S){var _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function L(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function g(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var F=g();function N(){try{if(!F||!F.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),n=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||n)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function k(e,n){e=e||[],n=n||{};try{return new Blob(e,n)}catch(r){if(r.name!=="TypeError")throw r;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,o=new t,a=0;a<e.length;a+=1)o.append(e[a]);return o.getBlob(n.type)}}typeof Promise>"u"&&W(3);var v=Promise;function y(e,n){n&&e.then(function(t){n(null,t)},function(t){n(t)})}function P(e,n,t){typeof n=="function"&&e.then(n),typeof t=="function"&&e.catch(t)}function M(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function K(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var $="local-forage-detect-blob-support",te=void 0,Y={},pe=Object.prototype.toString,re="readonly",f="readwrite";function D(e){for(var n=e.length,t=new ArrayBuffer(n),o=new Uint8Array(t),a=0;a<n;a++)o[a]=e.charCodeAt(a);return t}function w(e){return new v(function(n){var t=e.transaction($,f),o=k([""]);t.objectStore($).put(o,"key"),t.onabort=function(a){a.preventDefault(),a.stopPropagation(),n(!1)},t.oncomplete=function(){var a=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);n(r||!a||parseInt(a[1],10)>=43)}}).catch(function(){return!1})}function R(e){return typeof te=="boolean"?v.resolve(te):w(e).then(function(n){return te=n,te})}function d(e){var n=Y[e.name],t={};t.promise=new v(function(o,a){t.resolve=o,t.reject=a}),n.deferredOperations.push(t),n.dbReady?n.dbReady=n.dbReady.then(function(){return t.promise}):n.dbReady=t.promise}function p(e){var n=Y[e.name],t=n.deferredOperations.pop();if(t)return t.resolve(),t.promise}function h(e,n){var t=Y[e.name],o=t.deferredOperations.pop();if(o)return o.reject(n),o.promise}function b(e,n){return new v(function(t,o){if(Y[e.name]=Y[e.name]||ge(),e.db)if(n)d(e),e.db.close();else return t(e.db);var a=[e.name];n&&a.push(e.version);var r=F.open.apply(F,a);n&&(r.onupgradeneeded=function(i){var s=r.result;try{s.createObjectStore(e.storeName),i.oldVersion<=1&&s.createObjectStore($)}catch(u){if(u.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+i.oldVersion+" to version "+i.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw u}}),r.onerror=function(i){i.preventDefault(),o(r.error)},r.onsuccess=function(){var i=r.result;i.onversionchange=function(s){s.target.close()},t(i),p(e)}})}function C(e){return b(e,!1)}function G(e){return b(e,!0)}function X(e,n){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),o=e.version<e.db.version,a=e.version>e.db.version;if(o&&(e.version!==n&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),a||t){if(t){var r=e.db.version+1;r>e.version&&(e.version=r)}return!0}return!1}function q(e){return new v(function(n,t){var o=new FileReader;o.onerror=t,o.onloadend=function(a){var r=btoa(a.target.result||"");n({__local_forage_encoded_blob:!0,data:r,type:e.type})},o.readAsBinaryString(e)})}function Q(e){var n=D(atob(e.data));return k([n],{type:e.type})}function fe(e){return e&&e.__local_forage_encoded_blob}function we(e){var n=this,t=n._initReady().then(function(){var o=Y[n._dbInfo.name];if(o&&o.dbReady)return o.dbReady});return P(t,e,e),t}function Ie(e){d(e);for(var n=Y[e.name],t=n.forages,o=0;o<t.length;o++){var a=t[o];a._dbInfo.db&&(a._dbInfo.db.close(),a._dbInfo.db=null)}return e.db=null,C(e).then(function(r){return e.db=r,X(e)?G(e):r}).then(function(r){e.db=n.db=r;for(var i=0;i<t.length;i++)t[i]._dbInfo.db=r}).catch(function(r){throw h(e,r),r})}function Z(e,n,t,o){o===void 0&&(o=1);try{var a=e.db.transaction(e.storeName,n);t(null,a)}catch(r){if(o>0&&(!e.db||r.name==="InvalidStateError"||r.name==="NotFoundError"))return v.resolve().then(function(){if(!e.db||r.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),G(e)}).then(function(){return Ie(e).then(function(){Z(e,n,t,o-1)})}).catch(t);t(r)}}function ge(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ee(e){var n=this,t={db:null};if(e)for(var o in e)t[o]=e[o];var a=Y[t.name];a||(a=ge(),Y[t.name]=a),a.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=we);var r=[];function i(){return v.resolve()}for(var s=0;s<a.forages.length;s++){var u=a.forages[s];u!==n&&r.push(u._initReady().catch(i))}var c=a.forages.slice(0);return v.all(r).then(function(){return t.db=a.db,C(t)}).then(function(l){return t.db=l,X(t,n._defaultConfig.version)?G(t):l}).then(function(l){t.db=a.db=l,n._dbInfo=t;for(var m=0;m<c.length;m++){var I=c[m];I!==n&&(I._dbInfo.db=t.db,I._dbInfo.version=t.version)}})}function Se(e,n){var t=this;e=M(e);var o=new v(function(a,r){t.ready().then(function(){Z(t._dbInfo,re,function(i,s){if(i)return r(i);try{var u=s.objectStore(t._dbInfo.storeName),c=u.get(e);c.onsuccess=function(){var l=c.result;l===void 0&&(l=null),fe(l)&&(l=Q(l)),a(l)},c.onerror=function(){r(c.error)}}catch(l){r(l)}})}).catch(r)});return y(o,n),o}function De(e,n){var t=this,o=new v(function(a,r){t.ready().then(function(){Z(t._dbInfo,re,function(i,s){if(i)return r(i);try{var u=s.objectStore(t._dbInfo.storeName),c=u.openCursor(),l=1;c.onsuccess=function(){var m=c.result;if(m){var I=m.value;fe(I)&&(I=Q(I));var x=e(I,m.key,l++);x!==void 0?a(x):m.continue()}else a()},c.onerror=function(){r(c.error)}}catch(m){r(m)}})}).catch(r)});return y(o,n),o}function J(e,n,t){var o=this;e=M(e);var a=new v(function(r,i){var s;o.ready().then(function(){return s=o._dbInfo,pe.call(n)==="[object Blob]"?R(s.db).then(function(u){return u?n:q(n)}):n}).then(function(u){Z(o._dbInfo,f,function(c,l){if(c)return i(c);try{var m=l.objectStore(o._dbInfo.storeName);u===null&&(u=void 0);var I=m.put(u,e);l.oncomplete=function(){u===void 0&&(u=null),r(u)},l.onabort=l.onerror=function(){var x=I.error?I.error:I.transaction.error;i(x)}}catch(x){i(x)}})}).catch(i)});return y(a,t),a}function le(e,n){var t=this;e=M(e);var o=new v(function(a,r){t.ready().then(function(){Z(t._dbInfo,f,function(i,s){if(i)return r(i);try{var u=s.objectStore(t._dbInfo.storeName),c=u.delete(e);s.oncomplete=function(){a()},s.onerror=function(){r(c.error)},s.onabort=function(){var l=c.error?c.error:c.transaction.error;r(l)}}catch(l){r(l)}})}).catch(r)});return y(o,n),o}function ye(e){var n=this,t=new v(function(o,a){n.ready().then(function(){Z(n._dbInfo,f,function(r,i){if(r)return a(r);try{var s=i.objectStore(n._dbInfo.storeName),u=s.clear();i.oncomplete=function(){o()},i.onabort=i.onerror=function(){var c=u.error?u.error:u.transaction.error;a(c)}}catch(c){a(c)}})}).catch(a)});return y(t,e),t}function gt(e){var n=this,t=new v(function(o,a){n.ready().then(function(){Z(n._dbInfo,re,function(r,i){if(r)return a(r);try{var s=i.objectStore(n._dbInfo.storeName),u=s.count();u.onsuccess=function(){o(u.result)},u.onerror=function(){a(u.error)}}catch(c){a(c)}})}).catch(a)});return y(t,e),t}function yt(e,n){var t=this,o=new v(function(a,r){if(e<0){a(null);return}t.ready().then(function(){Z(t._dbInfo,re,function(i,s){if(i)return r(i);try{var u=s.objectStore(t._dbInfo.storeName),c=!1,l=u.openKeyCursor();l.onsuccess=function(){var m=l.result;if(!m){a(null);return}e===0||c?a(m.key):(c=!0,m.advance(e))},l.onerror=function(){r(l.error)}}catch(m){r(m)}})}).catch(r)});return y(o,n),o}function _t(e){var n=this,t=new v(function(o,a){n.ready().then(function(){Z(n._dbInfo,re,function(r,i){if(r)return a(r);try{var s=i.objectStore(n._dbInfo.storeName),u=s.openKeyCursor(),c=[];u.onsuccess=function(){var l=u.result;if(!l){o(c);return}c.push(l.key),l.continue()},u.onerror=function(){a(u.error)}}catch(l){a(l)}})}).catch(a)});return y(t,e),t}function bt(e,n){n=K.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var o=this,a;if(!e.name)a=v.reject("Invalid arguments");else{var r=e.name===t.name&&o._dbInfo.db,i=r?v.resolve(o._dbInfo.db):C(e).then(function(s){var u=Y[e.name],c=u.forages;u.db=s;for(var l=0;l<c.length;l++)c[l]._dbInfo.db=s;return s});e.storeName?a=i.then(function(s){if(s.objectStoreNames.contains(e.storeName)){var u=s.version+1;d(e);var c=Y[e.name],l=c.forages;s.close();for(var m=0;m<l.length;m++){var I=l[m];I._dbInfo.db=null,I._dbInfo.version=u}var x=new v(function(T,V){var z=F.open(e.name,u);z.onerror=function(ee){var be=z.result;be.close(),V(ee)},z.onupgradeneeded=function(){var ee=z.result;ee.deleteObjectStore(e.storeName)},z.onsuccess=function(){var ee=z.result;ee.close(),T(ee)}});return x.then(function(T){c.db=T;for(var V=0;V<l.length;V++){var z=l[V];z._dbInfo.db=T,p(z._dbInfo)}}).catch(function(T){throw(h(e,T)||v.resolve()).catch(function(){}),T})}}):a=i.then(function(s){d(e);var u=Y[e.name],c=u.forages;s.close();for(var l=0;l<c.length;l++){var m=c[l];m._dbInfo.db=null}var I=new v(function(x,T){var V=F.deleteDatabase(e.name);V.onerror=function(){var z=V.result;z&&z.close(),T(V.error)},V.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},V.onsuccess=function(){var z=V.result;z&&z.close(),x(z)}});return I.then(function(x){u.db=x;for(var T=0;T<c.length;T++){var V=c[T];p(V._dbInfo)}}).catch(function(x){throw(h(e,x)||v.resolve()).catch(function(){}),x})})}return y(a,n),a}var wt={_driver:"asyncStorage",_initStorage:Ee,_support:N(),iterate:De,getItem:Se,setItem:J,removeItem:le,clear:ye,length:gt,key:yt,keys:_t,dropInstance:bt};function It(){return typeof openDatabase=="function"}var ae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Et="~~local_forage_type~",je=/^~~local_forage_type~([^~]+)~/,Re="__lfsc__:",Be=Re.length,Le="arbf",Pe="blob",Ge="si08",He="ui08",Ke="uic8",Qe="si16",Xe="si32",Je="ur16",qe="ui32",Ze="fl32",et="fl64",tt=Be+Le.length,nt=Object.prototype.toString;function rt(e){var n=e.length*.75,t=e.length,o,a=0,r,i,s,u;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var c=new ArrayBuffer(n),l=new Uint8Array(c);for(o=0;o<t;o+=4)r=ae.indexOf(e[o]),i=ae.indexOf(e[o+1]),s=ae.indexOf(e[o+2]),u=ae.indexOf(e[o+3]),l[a++]=r<<2|i>>4,l[a++]=(i&15)<<4|s>>2,l[a++]=(s&3)<<6|u&63;return c}function Oe(e){var n=new Uint8Array(e),t="",o;for(o=0;o<n.length;o+=3)t+=ae[n[o]>>2],t+=ae[(n[o]&3)<<4|n[o+1]>>4],t+=ae[(n[o+1]&15)<<2|n[o+2]>>6],t+=ae[n[o+2]&63];return n.length%3===2?t=t.substring(0,t.length-1)+"=":n.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function St(e,n){var t="";if(e&&(t=nt.call(e)),e&&(t==="[object ArrayBuffer]"||e.buffer&&nt.call(e.buffer)==="[object ArrayBuffer]")){var o,a=Re;e instanceof ArrayBuffer?(o=e,a+=Le):(o=e.buffer,t==="[object Int8Array]"?a+=Ge:t==="[object Uint8Array]"?a+=He:t==="[object Uint8ClampedArray]"?a+=Ke:t==="[object Int16Array]"?a+=Qe:t==="[object Uint16Array]"?a+=Je:t==="[object Int32Array]"?a+=Xe:t==="[object Uint32Array]"?a+=qe:t==="[object Float32Array]"?a+=Ze:t==="[object Float64Array]"?a+=et:n(new Error("Failed to get type for BinaryArray"))),n(a+Oe(o))}else if(t==="[object Blob]"){var r=new FileReader;r.onload=function(){var i=Et+e.type+"~"+Oe(this.result);n(Re+Pe+i)},r.readAsArrayBuffer(e)}else try{n(JSON.stringify(e))}catch(i){console.error("Couldn't convert value into a JSON string: ",e),n(null,i)}}function Dt(e){if(e.substring(0,Be)!==Re)return JSON.parse(e);var n=e.substring(tt),t=e.substring(Be,tt),o;if(t===Pe&&je.test(n)){var a=n.match(je);o=a[1],n=n.substring(a[0].length)}var r=rt(n);switch(t){case Le:return r;case Pe:return k([r],{type:o});case Ge:return new Int8Array(r);case He:return new Uint8Array(r);case Ke:return new Uint8ClampedArray(r);case Qe:return new Int16Array(r);case Je:return new Uint16Array(r);case Xe:return new Int32Array(r);case qe:return new Uint32Array(r);case Ze:return new Float32Array(r);case et:return new Float64Array(r);default:throw new Error("Unkown type: "+t)}}var Ue={serialize:St,deserialize:Dt,stringToBuffer:rt,bufferToString:Oe};function ot(e,n,t,o){e.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,o)}function Rt(e){var n=this,t={db:null};if(e)for(var o in e)t[o]=typeof e[o]!="string"?e[o].toString():e[o];var a=new v(function(r,i){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(s){return i(s)}t.db.transaction(function(s){ot(s,t,function(){n._dbInfo=t,r()},function(u,c){i(c)})},i)});return t.serializer=Ue,a}function ie(e,n,t,o,a,r){e.executeSql(t,o,a,function(i,s){s.code===s.SYNTAX_ERR?i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[n.storeName],function(u,c){c.rows.length?r(u,s):ot(u,n,function(){u.executeSql(t,o,a,r)},r)},r):r(i,s)},r)}function xt(e,n){var t=this;e=M(e);var o=new v(function(a,r){t.ready().then(function(){var i=t._dbInfo;i.db.transaction(function(s){ie(s,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],function(u,c){var l=c.rows.length?c.rows.item(0).value:null;l&&(l=i.serializer.deserialize(l)),a(l)},function(u,c){r(c)})})}).catch(r)});return y(o,n),o}function Tt(e,n){var t=this,o=new v(function(a,r){t.ready().then(function(){var i=t._dbInfo;i.db.transaction(function(s){ie(s,i,"SELECT * FROM "+i.storeName,[],function(u,c){for(var l=c.rows,m=l.length,I=0;I<m;I++){var x=l.item(I),T=x.value;if(T&&(T=i.serializer.deserialize(T)),T=e(T,x.key,I+1),T!==void 0){a(T);return}}a()},function(u,c){r(c)})})}).catch(r)});return y(o,n),o}function at(e,n,t,o){var a=this;e=M(e);var r=new v(function(i,s){a.ready().then(function(){n===void 0&&(n=null);var u=n,c=a._dbInfo;c.serializer.serialize(n,function(l,m){m?s(m):c.db.transaction(function(I){ie(I,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,l],function(){i(u)},function(x,T){s(T)})},function(I){if(I.code===I.QUOTA_ERR){if(o>0){i(at.apply(a,[e,u,t,o-1]));return}s(I)}})})}).catch(s)});return y(r,t),r}function At(e,n,t){return at.apply(this,[e,n,t,1])}function Nt(e,n){var t=this;e=M(e);var o=new v(function(a,r){t.ready().then(function(){var i=t._dbInfo;i.db.transaction(function(s){ie(s,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],function(){a()},function(u,c){r(c)})})}).catch(r)});return y(o,n),o}function Ct(e){var n=this,t=new v(function(o,a){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(i){ie(i,r,"DELETE FROM "+r.storeName,[],function(){o()},function(s,u){a(u)})})}).catch(a)});return y(t,e),t}function Bt(e){var n=this,t=new v(function(o,a){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(i){ie(i,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(s,u){var c=u.rows.item(0).c;o(c)},function(s,u){a(u)})})}).catch(a)});return y(t,e),t}function Lt(e,n){var t=this,o=new v(function(a,r){t.ready().then(function(){var i=t._dbInfo;i.db.transaction(function(s){ie(s,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],function(u,c){var l=c.rows.length?c.rows.item(0).key:null;a(l)},function(u,c){r(c)})})}).catch(r)});return y(o,n),o}function Pt(e){var n=this,t=new v(function(o,a){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(i){ie(i,r,"SELECT key FROM "+r.storeName,[],function(s,u){for(var c=[],l=0;l<u.rows.length;l++)c.push(u.rows.item(l).key);o(c)},function(s,u){a(u)})})}).catch(a)});return y(t,e),t}function Ot(e){return new v(function(n,t){e.transaction(function(o){o.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(a,r){for(var i=[],s=0;s<r.rows.length;s++)i.push(r.rows.item(s).name);n({db:e,storeNames:i})},function(a,r){t(r)})},function(o){t(o)})})}function Ut(e,n){n=K.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var o=this,a;return e.name?a=new v(function(r){var i;e.name===t.name?i=o._dbInfo.db:i=openDatabase(e.name,"","",0),e.storeName?r({db:i,storeNames:[e.storeName]}):r(Ot(i))}).then(function(r){return new v(function(i,s){r.db.transaction(function(u){function c(x){return new v(function(T,V){u.executeSql("DROP TABLE IF EXISTS "+x,[],function(){T()},function(z,ee){V(ee)})})}for(var l=[],m=0,I=r.storeNames.length;m<I;m++)l.push(c(r.storeNames[m]));v.all(l).then(function(){i()}).catch(function(x){s(x)})},function(u){s(u)})})}):a=v.reject("Invalid arguments"),y(a,n),a}var Ft={_driver:"webSQLStorage",_initStorage:Rt,_support:It(),iterate:Tt,getItem:xt,setItem:At,removeItem:Nt,clear:Ct,length:Bt,key:Lt,keys:Pt,dropInstance:Ut};function kt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function it(e,n){var t=e.name+"/";return e.storeName!==n.storeName&&(t+=e.storeName+"/"),t}function Mt(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function $t(){return!Mt()||localStorage.length>0}function zt(e){var n=this,t={};if(e)for(var o in e)t[o]=e[o];return t.keyPrefix=it(e,n._defaultConfig),$t()?(n._dbInfo=t,t.serializer=Ue,v.resolve()):v.reject()}function Yt(e){var n=this,t=n.ready().then(function(){for(var o=n._dbInfo.keyPrefix,a=localStorage.length-1;a>=0;a--){var r=localStorage.key(a);r.indexOf(o)===0&&localStorage.removeItem(r)}});return y(t,e),t}function Vt(e,n){var t=this;e=M(e);var o=t.ready().then(function(){var a=t._dbInfo,r=localStorage.getItem(a.keyPrefix+e);return r&&(r=a.serializer.deserialize(r)),r});return y(o,n),o}function Wt(e,n){var t=this,o=t.ready().then(function(){for(var a=t._dbInfo,r=a.keyPrefix,i=r.length,s=localStorage.length,u=1,c=0;c<s;c++){var l=localStorage.key(c);if(l.indexOf(r)===0){var m=localStorage.getItem(l);if(m&&(m=a.serializer.deserialize(m)),m=e(m,l.substring(i),u++),m!==void 0)return m}}});return y(o,n),o}function jt(e,n){var t=this,o=t.ready().then(function(){var a=t._dbInfo,r;try{r=localStorage.key(e)}catch{r=null}return r&&(r=r.substring(a.keyPrefix.length)),r});return y(o,n),o}function Gt(e){var n=this,t=n.ready().then(function(){for(var o=n._dbInfo,a=localStorage.length,r=[],i=0;i<a;i++){var s=localStorage.key(i);s.indexOf(o.keyPrefix)===0&&r.push(s.substring(o.keyPrefix.length))}return r});return y(t,e),t}function Ht(e){var n=this,t=n.keys().then(function(o){return o.length});return y(t,e),t}function Kt(e,n){var t=this;e=M(e);var o=t.ready().then(function(){var a=t._dbInfo;localStorage.removeItem(a.keyPrefix+e)});return y(o,n),o}function Qt(e,n,t){var o=this;e=M(e);var a=o.ready().then(function(){n===void 0&&(n=null);var r=n;return new v(function(i,s){var u=o._dbInfo;u.serializer.serialize(n,function(c,l){if(l)s(l);else try{localStorage.setItem(u.keyPrefix+e,c),i(r)}catch(m){(m.name==="QuotaExceededError"||m.name==="NS_ERROR_DOM_QUOTA_REACHED")&&s(m),s(m)}})})});return y(a,t),a}function Xt(e,n){if(n=K.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var o=this,a;return e.name?a=new v(function(r){e.storeName?r(it(e,o._defaultConfig)):r(e.name+"/")}).then(function(r){for(var i=localStorage.length-1;i>=0;i--){var s=localStorage.key(i);s.indexOf(r)===0&&localStorage.removeItem(s)}}):a=v.reject("Invalid arguments"),y(a,n),a}var Jt={_driver:"localStorageWrapper",_initStorage:zt,_support:kt(),iterate:Wt,getItem:Vt,setItem:Qt,removeItem:Kt,clear:Yt,length:Ht,key:jt,keys:Gt,dropInstance:Xt},qt=function(n,t){return n===t||typeof n=="number"&&typeof t=="number"&&isNaN(n)&&isNaN(t)},Zt=function(n,t){for(var o=n.length,a=0;a<o;){if(qt(n[a],t))return!0;a++}return!1},st=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},_e={},ut={},ve={INDEXEDDB:wt,WEBSQL:Ft,LOCALSTORAGE:Jt},en=[ve.INDEXEDDB._driver,ve.WEBSQL._driver,ve.LOCALSTORAGE._driver],xe=["dropInstance"],Fe=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(xe),tn={description:"",driver:en.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function nn(e,n){e[n]=function(){var t=arguments;return e.ready().then(function(){return e[n].apply(e,t)})}}function ke(){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var t in n)n.hasOwnProperty(t)&&(st(n[t])?arguments[0][t]=n[t].slice():arguments[0][t]=n[t])}return arguments[0]}var rn=function(){function e(n){L(this,e);for(var t in ve)if(ve.hasOwnProperty(t)){var o=ve[t],a=o._driver;this[t]=a,_e[a]||this.defineDriver(o)}this._defaultConfig=ke({},tn),this._config=ke({},this._defaultConfig,n),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t>"u"?"undefined":_(t))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var o in t){if(o==="storeName"&&(t[o]=t[o].replace(/\W/g,"_")),o==="version"&&typeof t[o]!="number")return new Error("Database version must be a number.");this._config[o]=t[o]}return"driver"in t&&t.driver?this.setDriver(this._config.driver):!0}else return typeof t=="string"?this._config[t]:this._config},e.prototype.defineDriver=function(t,o,a){var r=new v(function(i,s){try{var u=t._driver,c=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){s(c);return}for(var l=Fe.concat("_initStorage"),m=0,I=l.length;m<I;m++){var x=l[m],T=!Zt(xe,x);if((T||t[x])&&typeof t[x]!="function"){s(c);return}}var V=function(){for(var be=function(sn){return function(){var un=new Error("Method "+sn+" is not implemented by the current driver"),ct=v.reject(un);return y(ct,arguments[arguments.length-1]),ct}},Me=0,an=xe.length;Me<an;Me++){var $e=xe[Me];t[$e]||(t[$e]=be($e))}};V();var z=function(be){_e[u]&&console.info("Redefining LocalForage driver: "+u),_e[u]=t,ut[u]=be,i()};"_support"in t?t._support&&typeof t._support=="function"?t._support().then(z,s):z(!!t._support):z(!0)}catch(ee){s(ee)}});return P(r,o,a),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,o,a){var r=_e[t]?v.resolve(_e[t]):v.reject(new Error("Driver not found."));return P(r,o,a),r},e.prototype.getSerializer=function(t){var o=v.resolve(Ue);return P(o,t),o},e.prototype.ready=function(t){var o=this,a=o._driverSet.then(function(){return o._ready===null&&(o._ready=o._initDriver()),o._ready});return P(a,t,t),a},e.prototype.setDriver=function(t,o,a){var r=this;st(t)||(t=[t]);var i=this._getSupportedDrivers(t);function s(){r._config.driver=r.driver()}function u(m){return r._extend(m),s(),r._ready=r._initStorage(r._config),r._ready}function c(m){return function(){var I=0;function x(){for(;I<m.length;){var T=m[I];return I++,r._dbInfo=null,r._ready=null,r.getDriver(T).then(u).catch(x)}s();var V=new Error("No available storage method found.");return r._driverSet=v.reject(V),r._driverSet}return x()}}var l=this._driverSet!==null?this._driverSet.catch(function(){return v.resolve()}):v.resolve();return this._driverSet=l.then(function(){var m=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(m).then(function(I){r._driver=I._driver,s(),r._wrapLibraryMethodsWithReady(),r._initDriver=c(i)})}).catch(function(){s();var m=new Error("No available storage method found.");return r._driverSet=v.reject(m),r._driverSet}),P(this._driverSet,o,a),this._driverSet},e.prototype.supports=function(t){return!!ut[t]},e.prototype._extend=function(t){ke(this,t)},e.prototype._getSupportedDrivers=function(t){for(var o=[],a=0,r=t.length;a<r;a++){var i=t[a];this.supports(i)&&o.push(i)}return o},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,o=Fe.length;t<o;t++)nn(this,Fe[t])},e.prototype.createInstance=function(t){return new e(t)},e}(),on=new rn;A.exports=on},{3:3}]},{},[4])(4)})}(We)),We.exports}var Nn=An();const Ce=cn(Nn);async function pt(E){return new Promise((B,W)=>{const A=new FileReader;A.onload=S=>{var _;(_=S.target)!=null&&_.result?B(S.target.result):W(new Error("Failed to read blob data"))},A.onerror=()=>{W(A.error||new Error("Unknown error occurred"))},A.readAsDataURL(E)})}function Cn(E,B,W,A){const S=new FormData;return S.append("name_token",E),S.append("zone_id",B),S.append("file",W),S.append("labels",A),Sn({url:"/api/file/upload",method:"post",data:S,headers:{"Content-Type":"multipart/form-data"}})}const Bn={class:"take-photos-view"},Ln={class:"camera-container"},Pn={id:"video",playsinline:"",autoplay:""},On={class:"preview-drawer"},Un=["src"],Fn={class:"preview-info"},kn={class:"info-section"},Mn={class:"location-info blur-panel"},$n={class:"info-row"},zn={class:"info-row"},Yn={class:"time-info blur-panel"},Vn={class:"thumbnail-section blur-panel"},Wn={class:"thumbnail-header"},jn={class:"thumbnail-list"},Gn=["onClick"],Hn=["src"],Kn={class:"tags-container blur-panel"},Qn={class:"preview-action-buttons blur-panel"},Xn={class:"bottom-controls"},Jn={class:"thumbnail-section"},qn={class:"thumbnail-header"},Zn={class:"thumbnail-list"},er=["onClick"],tr=["src"],nr={class:"action-buttons"},rr={key:0,class:"upload-progress"},or=fn({__name:"TakePhotosView",setup(E){const B=d=>`${f.value.current}/${f.value.total} (${d}%)`;function W(){if(k.value){const d=v.value.findIndex(p=>p.value===k.value.value);d!==-1&&(d===v.value.length-1?k.value=v.value[0]:k.value=v.value[d+1])}}const A=oe(null),S=oe(!1),_=oe(null),L=Ce.createInstance({driver:Ce.INDEXEDDB,name:"image-storage",storeName:"images"});Ce.setDriver(Ce.INDEXEDDB);const g=oe([]);L.iterate((d,p,h)=>{console.log(d,p,h),d&&g.value.push(d)});const F=oe([]);ft(async()=>{const d=await En();F.value=d});const N=ln(),k=oe(),v=oe([]);async function y(){try{if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)throw new Error("浏览器不支持mediaDevices API");await navigator.mediaDevices.getUserMedia({video:!0});const d=await navigator.mediaDevices.enumerateDevices();M(d)}catch(d){K(d),ne.error("获取摄像头失败，请确保已授予摄像头权限")}}y(),ft(()=>{y()}),dn(k,(d,p)=>{if(d){const h=document.getElementById("video");if(h&&h.srcObject){const b=h.srcObject.getTracks();for(let C=0;C!==b.length;++C)b[C].stop()}navigator.mediaDevices.getUserMedia({video:{deviceId:d.deviceInfo.deviceId}}).then(function(b){const C=document.getElementById("video");C.srcObject=b}).catch(K)}});function P(d){S.value=!0,F.value.forEach(p=>{var h;p.checked=((h=d==null?void 0:d.labels)==null?void 0:h.includes(p.label))||!1}),d!=null&&d.labels?(d.labels=F.value.filter(p=>p.checked).map(p=>p.label),L.setItem(d.id.toString(),Ae(d)).then(()=>{_.value=Ae(d),S.value=!0}).catch(p=>{console.error(p)})):d.labels=[]}function M(d){for(let p=0;p!==d.length;++p){const h=d[p];h.kind==="videoinput"&&h.label.includes("back")&&v.value.push({label:h.label||`camera ${v.value.length+1}`,value:h.deviceId,deviceInfo:h})}if(k.value&&k.value.length===0)for(let p=0;p!==d.length;++p){const h=d[p];h.kind==="videoinput"&&v.value.push({label:h.label||`camera ${v.value.length+1}`,value:h.deviceId,deviceInfo:h})}console.log(v.value),k.value=v.value[0]}function K(d){console.log("navigator.MediaDevices.getUserMedia error: ",d.message,d.name)}function $(){var p;if(S.value){S.value=!1,k.value=null;return}const d=document.getElementById("video");if(d&&d.srcObject){const h=(p=d==null?void 0:d.srcObject)==null?void 0:p.getVideoTracks()[0];if(h){let b=new ImageCapture(h);const C=ht();b.takePhoto().then(async G=>{const X=await pt(G),q={id:C,dataUrl:X,gps:{accuracy:N.gps.accuracy,coords:{latitude:N.gps.coords.latitude,longitude:N.gps.coords.longitude},timestamp:N.gps.timestamp},shotTime:Date.now(),labels:[]};L.setItem(q.id.toString(),q).then(()=>{console.log("Image stored successfully"),ne({message:"照片已保存",type:"success"}),g.value.push(q),_.value=q,S.value=!0}).catch(Q=>{ne({message:"保存照片失败:"+Q.message,type:"error"})})}).catch(G=>{console.error("takePhoto() error: ",G)})}}}function te(){console.log(_.value),_.value&&L.removeItem(_.value.id.toString()).then(()=>{console.log("Image removed successfully");const d=g.value.findIndex(p=>{var h;return p.id===((h=_.value)==null?void 0:h.id)});d!==-1&&g.value.splice(d,1),ne({message:"照片已删除",type:"success"}),S.value=!1}).catch(d=>{ne.error("删除照片失败:",d)}).finally(()=>{S.value=!1})}const Y=wn(),pe=async d=>{if(d.raw){const p=ht(),h={id:p,dataUrl:await pt(d.raw),gps:{accuracy:N.gps.accuracy,coords:{latitude:N.gps.coords.latitude,longitude:N.gps.coords.longitude},timestamp:N.gps.timestamp},shotTime:Date.now()};L.setItem(p,h),g.value.push(h),_.value=h,S.value=!0}},re=oe(null),f=oe({isUploading:!1,current:0,total:0,success:0,failed:0}),D=async()=>{if(g.value.length===0){ne.warning("没有待上传的图片");return}f.value={isUploading:!0,current:0,total:g.value.length,success:0,failed:0};const d=localStorage.getItem("name_token")||"";if(d===""){ne.warning("获取name_token失败，请从邀请链接访问。");return}const p=Y.currentRoute.value.params.zoneId,h=[...g.value];for(;h.length>0&&f.value.isUploading;){const b=h.shift();if(b){f.value.current++;try{const G=await(await fetch(b.dataUrl)).blob(),X=new File([G],`photo_${b.shotTime}.jpg`,{type:"image/jpeg"}),q=(b.labels||[]).join(",");await Cn(d,p,X,q),await L.removeItem(b.id.toString());const Q=g.value.findIndex(fe=>fe.id===b.id);Q!==-1&&g.value.splice(Q,1),f.value.success++}catch(C){f.value.failed++,ne.error(`图片 ${f.value.current}/${f.value.total} 上传失败: ${C.message}`),(!b.retryCount||b.retryCount<3)&&(b.retryCount=(b.retryCount||0)+1,h.push(b))}}}f.value.isUploading=!1,f.value.success>0&&ne.success(`上传完成！成功：${f.value.success}，失败：${f.value.failed}`),S.value=!1},w=async(d,p)=>{if(d.checked=p,d=Ae(d),!!d&&_.value){_.value.labels=F.value.filter(h=>h.checked).map(h=>h.label);try{const h=_.value.id.toString(),b=Ae(_.value);await L.setItem(h,b);const C=g.value.findIndex(G=>{var X;return G.id===((X=_.value)==null?void 0:X.id)});C!==-1&&(g.value[C]=_.value)}catch(h){console.log(h),ne.error("标签更新失败: "+h)}}};function R(){const d=A.value;d&&(document.fullscreenElement?document.exitFullscreen():d.requestFullscreen())}return(d,p)=>{var Q,fe,we,Ie,Z,ge,Ee,Se,De;const h=he("el-button"),b=he("el-icon"),C=he("el-check-tag"),G=he("el-popconfirm"),X=he("el-upload"),q=he("el-progress");return ce(),se("div",Bn,[O("div",Ln,[lt(O("video",Pn,null,512),[[dt,!S.value]]),U(h,{class:"camera-select",icon:de(vn),circle:"",onClick:W},null,8,["icon"])]),lt(O("div",On,[O("img",{class:"preview-image",ref_key:"imgdrawer",ref:A,onClick:R,src:(Q=_.value)==null?void 0:Q.dataUrl,alt:""},null,8,Un),O("div",Fn,[O("div",kn,[O("div",Mn,[O("div",$n,"纬度: "+ue((Ie=(we=(fe=_.value)==null?void 0:fe.gps)==null?void 0:we.coords)==null?void 0:Ie.latitude),1),O("div",zn,"经度: "+ue((Ee=(ge=(Z=_.value)==null?void 0:Z.gps)==null?void 0:ge.coords)==null?void 0:Ee.longitude),1)]),O("div",Yn,"GPS Time: "+ue((De=(Se=_.value)==null?void 0:Se.gps)==null?void 0:De.timestamp),1),U(h,{class:"fullscreen-btn",type:"primary",circle:"",onClick:R},{default:H(()=>[U(b,null,{default:H(()=>[U(de(mn))]),_:1})]),_:1})]),O("div",null,[O("div",Vn,[O("div",Wn,"待上传列表 ("+ue(g.value.length)+")",1),O("div",jn,[(ce(!0),se(ze,null,Ye(g.value,(J,le)=>(ce(),se("div",{key:le,class:"thumbnail-item",onClick:ye=>P(J)},[O("img",{src:J.dataUrl,alt:"photo",class:"thumbnail-image"},null,8,Hn)],8,Gn))),128))])]),O("div",Kn,[(ce(!0),se(ze,null,Ye(F.value,(J,le)=>(ce(),se("div",{key:le,class:"tag-item"},[U(C,{checked:J.checked,onChange:ye=>w(J,ye)},{default:H(()=>[me(ue(J.checked?"✓":"")+" "+ue(J.label),1)]),_:2},1032,["checked","onChange"])]))),128))]),O("div",Qn,[U(G,{title:"确认删除?",onConfirm:te},{reference:H(()=>[U(h,{class:"preview-btn",type:"danger",round:"",size:"large"},{default:H(()=>[U(b,null,{default:H(()=>[U(de(pn))]),_:1}),p[1]||(p[1]=me(" 删除 "))]),_:1})]),_:1}),U(h,{class:"preview-btn",type:"success",round:"",size:"large",onClick:D,loading:f.value.isUploading},{default:H(()=>[U(b,null,{default:H(()=>[U(de(gn))]),_:1}),me(" "+ue(f.value.isUploading?"上传中...":"上传"),1)]),_:1},8,["loading"]),U(h,{class:"preview-btn",type:"info",round:"",size:"large",onClick:p[0]||(p[0]=J=>S.value=!1)},{default:H(()=>[U(b,null,{default:H(()=>[U(de(yn))]),_:1}),p[2]||(p[2]=me(" 返回 "))]),_:1})])])])],512),[[dt,S.value]]),O("div",Xn,[O("div",Jn,[O("div",qn,"待上传列表 ("+ue(g.value.length)+")",1),O("div",Zn,[(ce(!0),se(ze,null,Ye(g.value,(J,le)=>(ce(),se("div",{key:le,class:"thumbnail-item",onClick:ye=>P(J)},[O("img",{src:J.dataUrl,alt:"photo",class:"thumbnail-image"},null,8,tr)],8,er))),128))])]),O("div",nr,[U(h,{class:"action-btn camera-btn",type:"danger",round:"",size:"large",onClick:$},{default:H(()=>[U(b,null,{default:H(()=>[U(de(_n))]),_:1}),p[3]||(p[3]=me(" 拍照 "))]),_:1}),U(X,{ref_key:"upload",ref:re,"show-file-list":!1,class:"action-btn select-btn",accept:"image/jpeg, image/png, image/gif, image/*",action:"",limit:1,onChange:pe,"auto-upload":!1},{trigger:H(()=>[U(h,{type:"primary",round:"",size:"large"},{default:H(()=>[U(b,null,{default:H(()=>[U(de(bn))]),_:1}),p[4]||(p[4]=me(" 选择照片 "))]),_:1})]),_:1},512)]),f.value.isUploading?(ce(),se("div",rr,[U(q,{percentage:Math.floor(f.value.current/f.value.total*100),format:B,"stroke-width":8},null,8,["percentage"])])):hn("",!0)])])}}}),cr=In(or,[["__scopeId","data-v-8a8fdb24"]]);export{cr as default};
