import{g as b}from"./zone-BezZfHLL.js";import{d as I,r as _,o as z,w as Z,c as m,a as n,u as o,E as k,b as g,e as h,f as u,g as s,h as p,i as v,t as V,j as E,k as w,F as y,l as B,m as L,n as x,p as F,_ as N}from"./index-BCQt0Us0.js";import"./request-wLIDLjxB.js";const S=I({__name:"ZoneView",setup(C){const d=g(),i=h(),e=_({zoneList:[],selectZoneId:void 0,name:""});z(()=>{const l=localStorage.getItem("name_token")||"";e.name=l.split("-")[0]});const c=()=>{i.push({path:`/takePhoto/${e.selectZoneId}`})};return Z(()=>[d.params.zoneId],async(l,a)=>{if(l){const t=Number(l);d.fullPath!=="/zone"&&(!d.params.zoneId||t<=0)&&i.push({path:"/zone"}),e.zoneList=await b();const r=e.zoneList.find(f=>f.id===t);e.selectZoneId=(r==null?void 0:r.id)||void 0,e.selectZoneId&&e.selectZoneId<=0&&i.push({path:"/zone"})}},{immediate:!0}),(l,a)=>(u(),m(o(k),{"label-position":"top","label-width":"auto",class:"centered-container"},{default:n(()=>[s(o(p),{label:"名称：","label-position":"top"},{default:n(()=>[v("div",null,V(e.name),1)]),_:1}),s(o(p),{label:"工作区：","label-position":"top"},{default:n(()=>[s(o(E),{modelValue:e.selectZoneId,"onUpdate:modelValue":a[0]||(a[0]=t=>e.selectZoneId=t),placeholder:"请选择工作区域",disabled:!!o(d).params.zoneId},{default:n(()=>[(u(!0),w(y,null,B(e.zoneList,t=>(u(),m(o(L),{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),s(o(p),null,{default:n(()=>[s(o(x),{style:{margin:"0 auto"},type:"primary",onClick:a[1]||(a[1]=t=>c())},{default:n(()=>a[2]||(a[2]=[F(" 开始拍照 ")])),_:1})]),_:1})]),_:1}))}}),$=N(S,[["__scopeId","data-v-2b304be7"]]);export{$ as default};
