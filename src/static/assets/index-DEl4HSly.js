import{d as R,a as q,r as m,u as B,b as F,c as N,e as v,f as o,g as l,H as s,R as U,h as t,S as z,T as E,v as K,t as w,J as x,k as T,l as D,_ as H}from"./index-PZ0i1nac.js";import{l as J}from"./user-D4aDxtNs.js";const M={class:"login-container"},j={class:"language-switch"},A={class:"login-title"},G=R({__name:"index",setup(O){const y=T(),g=q(),p=m(g.currentLanguage),{t:a,locale:V}=B(),b=r=>{g.setLanguage(r),V.value=r},u=m(!1),d=m(),n=F({username:"",password:""}),S={username:[{required:!0,message:a("validation.required"),trigger:"blur"},{min:3,max:20,message:a("validation.tooShort"),trigger:"blur"}],password:[{required:!0,message:a("validation.required"),trigger:"blur"},{min:6,max:20,message:a("validation.tooShort"),trigger:"blur"}]},_=async()=>{d.value&&await d.value.validate(async r=>{if(r)try{u.value=!0;const e=await J({username:n.username,password:n.password});localStorage.setItem("token",e.token),localStorage.setItem("username",e.username),localStorage.setItem("display_name",e.display_name),x.success(a("login.loginSuccess")),y.push("/admin")}catch(e){console.error("Login failed:",e),x.error(a("login.loginFailed"))}finally{u.value=!1}})};return(r,e)=>{const f=s("el-option"),k=s("el-select"),h=s("el-input"),c=s("el-form-item"),C=s("el-button"),L=s("el-form"),I=s("el-card");return D(),N("div",M,[v("div",j,[o(k,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=i=>p.value=i),onChange:b,size:"small"},{default:l(()=>[o(f,{label:"中文",value:"zh-CN"}),o(f,{label:"English",value:"en-US"})]),_:1},8,["modelValue"])]),o(I,{class:"login-card"},{header:l(()=>[v("h2",A,w(t(a)("login.title")),1)]),default:l(()=>[o(L,{ref_key:"loginFormRef",ref:d,model:n,rules:S,"label-width":"0",size:"large",onKeyup:U(_,["enter"])},{default:l(()=>[o(c,{prop:"username"},{default:l(()=>[o(h,{modelValue:n.username,"onUpdate:modelValue":e[1]||(e[1]=i=>n.username=i),placeholder:t(a)("login.username"),"prefix-icon":t(z)},null,8,["modelValue","placeholder","prefix-icon"])]),_:1}),o(c,{prop:"password"},{default:l(()=>[o(h,{modelValue:n.password,"onUpdate:modelValue":e[2]||(e[2]=i=>n.password=i),type:"password",placeholder:t(a)("login.password"),"prefix-icon":t(E),"show-password":""},null,8,["modelValue","placeholder","prefix-icon"])]),_:1}),o(c,null,{default:l(()=>[o(C,{loading:u.value,type:"primary",class:"login-button",onClick:_},{default:l(()=>[K(w(t(a)("login.loginButton")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])}}}),W=H(G,[["__scopeId","data-v-8a1d4228"]]);export{W as default};
